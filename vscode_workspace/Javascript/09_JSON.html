<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON</title>
    <script>
      /*
        JSON (Javascript Object Notation)
        -　자바스크립트 객체 표기법을 기반으로 한 데이터 교환 형식
        - 웹 어플리케이션에서 서버와 클라이언트 간의 데이터를 교환하는 데 자주 사용되어짐.

        JSON, YAML, CSV, XML ...

        JSON 장점
        1. 텍스트 기반 포맷 : JSON은 사람이 읽고 쓰기 쉬운 텍스트 기반 형식
        2. 데이터 교환 : 웹 서비스에서 서버와 클라이언트 간의 데이터 전송에 매우 효율적
        3. 경량 : 파일 크기가 작아 네트워크 전송에 유리
      */

      // 문자열
      let = obj = '{"id" : "aaa", "title": "bbb"}';
      console.log("----문자열----");
      console.log(obj.id);
      console.log(obj.title);

      console.log("-----문자열 => JSON 객체 -----");
      let obj2 = JSON.parse(obj); // 문자열을 JSON 객체로 변환
      console.log(obj2.id);
      console.log(obj2.title);

      // JSON 형식 규칙
      // 키(key)는 반드시 큰 따옴표로 감싸져야 한다. (JSON 문법)
      // 값(value)는 반드시 감싸지 않아도 되는 경우
      // > 숫자, boolean, null

      window.onload = function () {
        let person = {
          name: "John Doe",
          age: 30,
          isStudent: false,
          courses: ["Math", "Science", "History"],
          address: {
            street: "123 Main St",
            city: "Anytown",
            State: "CA",
          },
        };
        let jsonString = JSON.stringify(person);
        console.log(jsonString);
        console.log(typeof jsonString);

        // 수신 입장
        let jsonString2 =
          '{"name":"John Doe","age":30,"isStudent":false,"courses":["Math","Science","History"],"address":{"street":"123 Main St","city":"Anytown","State":"CA"}}';

        // JSON 문자열을 객체로 변환
        let person2 = JSON.parse(jsonString2);
        console.log(person2);
        console.log(typeof person2);
        console.log(person2.name);
        console.log(person2.courses);

        let contents = document.querySelector("#contents");
        let str = "";
        str += `<table>`;
        str += `<caption>학생 정보 </caption>`;
        str += `<tr>`;
        str += `<th> 이름 </th>`;
        str += `<td>${person2.name}</td>`;
        str += `</tr>`;
        str += `<tr>`;
        str += `<th> 나이 </th>`;
        str += `<td>${person2.age}</td>`;
        str += `</tr>`;
        str += `<tr>`;
        str += `<th> 과목 </th>`;
        str += `<td>${person2.courses[0]}, ${person2.courses[1]}, ${person2.courses[2]}</td>`;
        str += `</tr>`;
        str += `<tr>`;
        str += `<th> 주소 </th>`;
        str += `<td>${person2.address.street}, ${person2.address.city}, ${person2.address.State}</td>`;
        str += `</tr>`;
        str += `</table>`;
        contents.innerHTML = str;
      };
    </script>
    <style>
      table,
      th,
      td {
        border: 1px solid black;
        border-collapse: collapse;
      }
      th {
        width: 100px;
        height: 80px;
        background-color: beige;
      }
      td {
        width: 300px;
        height: 80px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id="contents"></div>
  </body>
</html>
